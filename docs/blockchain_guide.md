# üß† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –ë–ª–æ–∫—á–µ–π–Ω –Ω–∞ Go

**–ü—Ä–æ–µ–∫—Ç:** –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏  
**–°—Ç—É–¥–µ–Ω—Ç—ã:** –ü–∞–≤–ª–µ–Ω–∫–æ –í–ª–∞–¥–∏—Å–ª–∞–≤ –°–µ—Ä–≥–µ–µ–≤–∏—á | –§–æ–∫–∏–Ω –ü–∞–≤–µ–ª –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á  
**–ì—Ä—É–ø–ø–∞:** 241-338

---

## üìå –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—á—É—é –º–æ–¥–µ–ª—å –±–ª–æ–∫—á–µ–π–Ω–∞ –Ω–∞ —è–∑—ã–∫–µ Go, –≤–∫–ª—é—á–∞—é—â—É—é:

- —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–ª–æ–∫–∞;
- —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏;
- Proof-of-Work;
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫—É —Ü–µ–ø–æ—á–∫–∏;
- CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `block.go` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞, –º–∞–π–Ω–∏–Ω–≥ |
| `blockchain.go` | –†–∞–±–æ—Ç–∞ —Å —Ü–µ–ø–æ—á–∫–æ–π: —Å–æ–∑–¥–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ |
| `transaction.go` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π |
| `main.go` | CLI-–∑–∞–ø—É—Å–∫ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è |



---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞

–ö–∞–∂–¥—ã–π –±–ª–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç:

- –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (Index),
- –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ (Timestamp),
- —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π,
- —Ö—ç—à –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±–ª–æ–∫–∞,
- —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö—ç—à,
- –∑–Ω–∞—á–µ–Ω–∏–µ `Nonce`.

–ë–ª–æ–∫–∏ —Å–≤—è–∑–∞–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, —Ñ–æ—Ä–º–∏—Ä—É—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é —Ü–µ–ø–æ—á–∫—É. –ù–∞—Ä—É—à–µ–Ω–∏–µ –¥–∞–∂–µ –æ–¥–Ω–æ–≥–æ —Ö—ç—à–∞ –¥–µ–ª–∞–µ—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π.

```go
type Block struct {
	Index        int
	Timestamp    int64
	Transactions []Transaction
	PrevHash     []byte
	Hash         []byte
	Nonce        int
}
```
---

## üîÅ –ê–ª–≥–æ—Ä–∏—Ç–º Proof-of-Work

–ß—Ç–æ–±—ã –±–ª–æ–∫ –Ω–µ–ª—å–∑—è –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º Proof-of-Work.  
–°—É—Ç—å: –±–ª–æ–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–≤–∞–ª–∏–¥–Ω—ã–º¬ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ —Ö—ç—à –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω—É–ª–µ–≤—ã—Ö –±–∞–π—Ç–æ–≤. –≠—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `difficulty`.

–î–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–∞–∫–æ–≥–æ —Ö—ç—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `Nonce` –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ö—ç—à. –ß–µ–º –≤—ã—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å ‚Äî —Ç–µ–º –±–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è.

```go
prefix := bytes.Repeat([]byte{0}, difficulty)
if bytes.HasPrefix(b.Hash, prefix) { break }
```
![–°–∫—Ä–∏–Ω—à–æ—Ç —Ö—ç—à–∞ —Å –Ω—É–ª—è–º–∏](images/hash_block.png)

---

## üí≥ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ —É—Å–ª–æ–≤–Ω–æ–π ¬´–≤–∞–ª—é—Ç—ã¬ª –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.  
–û–Ω–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –±–ª–æ–∫ –¥–æ –Ω–∞—á–∞–ª–∞ –º–∞–π–Ω–∏–Ω–≥–∞. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

- –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å (`From`);
- –ø–æ–ª—É—á–∞—Ç–µ–ª—å (`To`);
- —Å—É–º–º–∞ (`Amount`).

–ü–µ—Ä–µ–¥ –º–∞–π–Ω–∏–Ω–≥–æ–º –Ω–æ–≤—ã–π –±–ª–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –µ–≥–æ —á–∞—Å—Ç—å—é.

```go
	tx1 := bc.Transaction{From: "Alex", To: "Booba", Amount: 15}
	tx2 := bc.Transaction{From: "Adolf", To: "Sergi", Amount: 34}
	chain.AddBlock([]bc.Transaction{tx1, tx2})
```
![–°–∫—Ä–∏–Ω –≤—ã–≤–æ–¥–∞ –±–ª–æ–∫–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ](images/transaction.png)

---

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–ø–æ—á–∫–∏

–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª (`chain.gob`).  
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã,
- –∑–∞–≥—Ä—É–∂–∞—Ç—å –µ–≥–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ.

–ï—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π –±–ª–æ–∫ (–≥–µ–Ω–µ–∑–∏—Å-–±–ª–æ–∫), —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –æ—Ç —Å–∏—Å—Ç–µ–º—ã.

```go
chain := Load("chain.gob", difficulty)
...
chain.Save("chain.gob")
```

---

## üñ• –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ CLI. –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:

```bash
go run main.go -difficulty 2